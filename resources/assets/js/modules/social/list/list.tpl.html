<div class='row-fluid mbm'>
	<div class='span12'>
		<div class='inner-medium'>
			<div class="btn-group pull-left mrm">
				<button class="btn dropdown-toggle" data-toggle="dropdown">
					<span ng-show='filters.serieId == "all"'>All Discussions</span>
					<span ng-show='filters.serieId == 0'>Your Team</span>
					<span ng-show='filters.serieId > 0'>{{ selectedSerie.name }}</span>
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu">
					<li class='pointer'>
						<a ui-sref='conversations.list({ serieId: "all" })'>
							All Discussions
						</a>
					</li>
					<li class='pointer'>
						<a ui-sref='conversations.list({ serieId: 0 })'>
							Your Team
						</a>
					</li>
					<li class='pointer' ng-repeat='serie in main.series'>
						<a ui-sref='conversations.list({ serieId: serie.id })'>
							{{ serie.name }}
						</a>
					</li>
				</ul>
			</div>

			<ul class="nav nav-pills pull-left mbn">
				<li ng-class='{ active: filters.type == "latest" }'>
					<a ui-sref='conversations.list({ type: "latest" })'>Latest</a>
				</li>

				<li ng-class='{ active: filters.type == "unread" }'>
					<a ui-sref='conversations.list({ type: "unread" })'>
						<i class='icon-bookmark'></i> Unread
					</a>
				</li>

				<li ng-class='{ active: filters.type == "starred" }'>
					<a ui-sref='conversations.list({ type: "starred" })'>
						<i class='icon-star'></i> Starred
					</a>
				</li>

				<li ng-class='{ active: filters.type == "top" }'>
					<a ui-sref='conversations.list({ type: "top" })'>Top</a>
				</li>
			</ul>

			<a ui-sref='profile.social.create' class='btn pull-right'>
				<i class='icon-plus text-success'></i> Create Discussion
			</a>
		</div>
	</div>
</div>

<hr class='mbn mtn'>

<div infinite-scroll-disabled='filters.disableInfiniteScroll' infinite-scroll='nextPage()' infinite-scroll-distance='2'>
	<table class='table table-striped table-middle table-hover'>
		<thead>
			<tr>
				<th></th>
				<th class='span5'>Discussion</th>
				<th>App</th>
				<th>Users</th>
				<th class='text-center'>Posts</th>
				<th class='text-center'>Likes</th>
				<th class='text-center'>Views</th>
				<th colspan='2' class='text-center'>Activity</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat='topic in topics'>
				<td class='text-center'>
					<i class='icon-star icon-large' ng-click='toggleTopicUserStar(topic)' ng-class='{ muted: !topic.is_starred, "text-orange": topic.is_starred }'></i>
				</td>
				<td class='pointer' ui-sref='profile.social.view({ topicId: topic.id })'>
					<h5 class='mbn mtn' ng-class='{ muted: !topic.is_unread }'>{{ topic.name }}</h5>
				</td>
				<td>
					<span class='badge badge-info'>{{ topic.serie.name }}</span>
				</td>
				<td>
					<img class='mrs img-rounded' ng-repeat='user in topic.users' ng-src='/image?size=25&type=square&image={{ user.image }}' title='{{ user.name }}'>
				</td>
				<td class='text-center'>
					{{ topic.post_count }}
				</td>
				<td class='text-center'>
					<span ng-if='topic.like_count > 0'>
						{{ topic.like_count }} <i class='icon-heart text-red'></i>
					</span>
				</td>
				<td class='text-center'>{{ topic.view_count }}</td>
				<td class='text-center'>{{ topic.created_at | smallFromNow }}</td>
				<td class='text-center'>{{ topic.updated_at | smallFromNow }}</td>
			</tr>
		</tbody>
	</table>
</div>